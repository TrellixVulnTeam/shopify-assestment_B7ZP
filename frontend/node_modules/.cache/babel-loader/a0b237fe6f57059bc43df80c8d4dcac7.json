{"ast":null,"code":"var _jsxFileName = \"/Users/somto/Desktop/personal/shop/src/components/dashboard/scrroll.component.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ScrollComponent extends Component {\n  constructor() {\n    super();\n    this.state = {\n      photos: [],\n      loading: false,\n      page: 0,\n      prevY: 0\n    };\n  }\n\n  getPhotos(page) {\n    try {\n      this.props.loadData();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.mount) {\n      this.setState({\n        mount: false\n      });\n      return;\n    }\n\n    this.setState({\n      mount: true\n    });\n    this.getPhotos();\n    var options = {\n      root: null,\n      rootMargin: \"0px\",\n      threshold: 1.0\n    };\n    this.observer = new IntersectionObserver(this.handleObserver.bind(this), options);\n    this.observer.observe(this.loadingRef);\n  }\n\n  handleObserver(entities, observer) {\n    const y = entities[0].boundingClientRect.y;\n\n    if (this.state.prevY > y) {\n      //   const lastPhoto = this.state.photos[this.state.photos.length - 1];\n      //   const curPage = lastPhoto.albumId;\n      this.getPhotos(); //   this.setState({ page: curPage });\n    }\n\n    this.setState({\n      prevY: y\n    });\n  }\n\n  render() {\n    // Additional css\n    const loadingCSS = {\n      height: \"100px\",\n      margin: \"30px\"\n    }; // To change the loading icon behavior\n\n    const loadingTextCSS = {\n      display: this.state.loading ? \"block\" : \"none\"\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          minHeight: \"800px\"\n        },\n        children: this.props.children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: loadingRef => this.loadingRef = loadingRef,\n        style: loadingCSS,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          style: loadingTextCSS,\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ScrollComponent;","map":{"version":3,"names":["React","Component","axios","ScrollComponent","constructor","state","photos","loading","page","prevY","getPhotos","props","loadData","error","console","log","componentDidMount","mount","setState","options","root","rootMargin","threshold","observer","IntersectionObserver","handleObserver","bind","observe","loadingRef","entities","y","boundingClientRect","render","loadingCSS","height","margin","loadingTextCSS","display","minHeight","children"],"sources":["/Users/somto/Desktop/personal/shop/src/components/dashboard/scrroll.component.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nclass ScrollComponent extends Component {\n  constructor() {\n    super();\n    this.state = {\n      photos: [],\n      loading: false,\n      page: 0,\n      prevY: 0\n    };\n  }\n\n  getPhotos(page) {\n    try {\n      this.props.loadData()\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.mount) {\n      this.setState({\n        mount: false\n      })\n      return\n    }\n\n    this.setState({\n      mount: true\n    })\n\n    this.getPhotos();\n    var options = {\n      root: null,\n      rootMargin: \"0px\",\n      threshold: 1.0\n    };\n\n    this.observer = new IntersectionObserver(\n      this.handleObserver.bind(this),\n      options\n    );\n    this.observer.observe(this.loadingRef);\n  }\n\n  handleObserver(entities, observer) {\n    const y = entities[0].boundingClientRect.y;\n    if (this.state.prevY > y) {\n      //   const lastPhoto = this.state.photos[this.state.photos.length - 1];\n      //   const curPage = lastPhoto.albumId;\n      this.getPhotos();\n      //   this.setState({ page: curPage });\n    }\n    this.setState({ prevY: y });\n  }\n\n  render() {\n\n    // Additional css\n    const loadingCSS = {\n      height: \"100px\",\n      margin: \"30px\"\n    };\n\n    // To change the loading icon behavior\n    const loadingTextCSS = { display: this.state.loading ? \"block\" : \"none\" };\n\n    return (\n      <div className=\"container\">\n        <div style={{ minHeight: \"800px\" }}>\n          {/* {this.state.photos.map(user => (\n            <img src={user.url} height=\"100px\" width=\"200px\" />\n          ))} */}\n          {this.props.children}\n        </div>\n        <div\n          ref={loadingRef => (this.loadingRef = loadingRef)}\n          style={loadingCSS}\n        >\n          <span style={loadingTextCSS}>Loading...</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ScrollComponent;"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,eAAN,SAA8BF,SAA9B,CAAwC;EACtCG,WAAW,GAAG;IACZ;IACA,KAAKC,KAAL,GAAa;MACXC,MAAM,EAAE,EADG;MAEXC,OAAO,EAAE,KAFE;MAGXC,IAAI,EAAE,CAHK;MAIXC,KAAK,EAAE;IAJI,CAAb;EAMD;;EAEDC,SAAS,CAACF,IAAD,EAAO;IACd,IAAI;MACF,KAAKG,KAAL,CAAWC,QAAX;IACD,CAFD,CAEE,OAAOC,KAAP,EAAc;MACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;IACD;EACF;;EAEDG,iBAAiB,GAAG;IAClB,IAAI,KAAKX,KAAL,CAAWY,KAAf,EAAsB;MACpB,KAAKC,QAAL,CAAc;QACZD,KAAK,EAAE;MADK,CAAd;MAGA;IACD;;IAED,KAAKC,QAAL,CAAc;MACZD,KAAK,EAAE;IADK,CAAd;IAIA,KAAKP,SAAL;IACA,IAAIS,OAAO,GAAG;MACZC,IAAI,EAAE,IADM;MAEZC,UAAU,EAAE,KAFA;MAGZC,SAAS,EAAE;IAHC,CAAd;IAMA,KAAKC,QAAL,GAAgB,IAAIC,oBAAJ,CACd,KAAKC,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CADc,EAEdP,OAFc,CAAhB;IAIA,KAAKI,QAAL,CAAcI,OAAd,CAAsB,KAAKC,UAA3B;EACD;;EAEDH,cAAc,CAACI,QAAD,EAAWN,QAAX,EAAqB;IACjC,MAAMO,CAAC,GAAGD,QAAQ,CAAC,CAAD,CAAR,CAAYE,kBAAZ,CAA+BD,CAAzC;;IACA,IAAI,KAAKzB,KAAL,CAAWI,KAAX,GAAmBqB,CAAvB,EAA0B;MACxB;MACA;MACA,KAAKpB,SAAL,GAHwB,CAIxB;IACD;;IACD,KAAKQ,QAAL,CAAc;MAAET,KAAK,EAAEqB;IAAT,CAAd;EACD;;EAEDE,MAAM,GAAG;IAEP;IACA,MAAMC,UAAU,GAAG;MACjBC,MAAM,EAAE,OADS;MAEjBC,MAAM,EAAE;IAFS,CAAnB,CAHO,CAQP;;IACA,MAAMC,cAAc,GAAG;MAAEC,OAAO,EAAE,KAAKhC,KAAL,CAAWE,OAAX,GAAqB,OAArB,GAA+B;IAA1C,CAAvB;IAEA,oBACE;MAAK,SAAS,EAAC,WAAf;MAAA,wBACE;QAAK,KAAK,EAAE;UAAE+B,SAAS,EAAE;QAAb,CAAZ;QAAA,UAIG,KAAK3B,KAAL,CAAW4B;MAJd;QAAA;QAAA;QAAA;MAAA,QADF,eAOE;QACE,GAAG,EAAEX,UAAU,IAAK,KAAKA,UAAL,GAAkBA,UADxC;QAEE,KAAK,EAAEK,UAFT;QAAA,uBAIE;UAAM,KAAK,EAAEG,cAAb;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAJF;QAAA;QAAA;QAAA;MAAA,QAPF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAgBD;;AAnFqC;;AAsFxC,eAAejC,eAAf"},"metadata":{},"sourceType":"module"}