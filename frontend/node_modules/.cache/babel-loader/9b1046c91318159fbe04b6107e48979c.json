{"ast":null,"code":"/**\n * Set of fucntions to handle axios calls\n */\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\n\nfunction manageErrorConnection(err) {\n  if (err.response && err.response.status >= 400 && err.response.status <= 500) {\n    try {\n      if (err.response) {\n        if (err.response.status === 401 && !err.config.url.includes('signin') && !err.config.url.includes('signup')) {}\n\n        const {\n          data\n        } = err.response;\n        const error = data.errors ? `${data.errors[0].message} ${data.errors[0].cause ? data.errors[0].cause : ''}` : data.payload.message;\n        console.log('::::::::::', error);\n        toast(error);\n        return Promise.reject(new Error(error));\n      }\n    } catch (error) {\n      console.log(error);\n    } // this will trigger the `handleError` function in the promise chain\n\n  } else if (err.code === 'ECONNREFUSED') {\n    // this will trigger the `handlerResponse` function in the promise chain\n    // bacause we are not returning a rejection! Just an example\n    return 'nevermind';\n  } else {\n    // this will trigger the `handleError` function in the promise chain\n    return Promise.reject(err);\n  }\n}\n\nfunction handleResponse(response) {\n  console.log(`handleResponse: ${response}`);\n}\n\nfunction handleError(error) {\n  console.log(`handleError: ${error}`);\n}\n\nclass AxiosCalls {\n  constructor() {\n    this.client = axios.create({\n      baseURL: `${process.env.REACT_APP_API}`\n    }); // Add a request interceptor\n\n    this.client.interceptors.request.use(function (config) {\n      // Do something before request is sent\n      const token = localStorage.getItem('accessToken');\n      const refresh = localStorage.getItem('refreshToken');\n      config.headers.Authorization = `Bearer ${token}`;\n      config.headers[\"X-Refresh-Token\"] = `refresh ${refresh}`;\n      return config;\n    }, function (error) {\n      // Do something with request error\n      return Promise.reject(error);\n    }); // this.client.interceptors.response.use(function (config) {\n    //     try {\n    //         console.log({ status: config.status })\n    //         const refreshToken = config.headers['x-refresh-token'];\n    //         const accessToken = config.headers['x-access-token'];\n    //         if (refreshToken && refreshToken) {\n    //             AuthUtil.registerUser({ accessToken, refreshToken })\n    //         }\n    //         return config;\n    //     } catch (error) {\n    //         console.log({ mmm: error })\n    //         return config;\n    //     }\n    // }\n    // , manageErrorConnection\n    // )\n  }\n  /**\n   * @description Axios get request\n   * @param {*} url url for request\n   * @returns  axios promisr\n   */\n\n\n  get(url) {\n    return this.client.get(url);\n  }\n  /**\n   * @description axios post request\n   * @param {*} url  for requst\n   * @param {*} data to post\n   * @returns \n   */\n\n\n  post(url, data) {\n    return this.client.post(url, data);\n  }\n  /**\n   * @description deltet axios requestt\n   * @param {*} url url for request\n   * @returns \n   */\n\n\n  delete(url) {\n    return this.client.delete(url);\n  }\n  /**\n   * \n   * @param {*} url url for request\n   * @param {*} data data to pass\n   * @returns \n   */\n\n\n  update(url) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this.client.put(url, data);\n  }\n  /**\n   * @description this function extract the error response message from the data\n   * @param {ErrorObject} error \n   */\n\n\n  extractErrorMessage(error) {\n    console.log({\n      error: error\n    });\n    const {\n      data\n    } = error.response;\n    return `${data.errors[0].message} ${data.errors[0].cause ? data.errors[0].cause : ''}`;\n  }\n\n}\n\nconst axiosCall = new AxiosCalls();\nexport default axiosCall;","map":{"version":3,"sources":["/Users/somto/Desktop/personal/studio/src/utils/axios.js"],"names":["axios","toast","manageErrorConnection","err","response","status","config","url","includes","data","error","errors","message","cause","payload","console","log","Promise","reject","Error","code","handleResponse","handleError","AxiosCalls","constructor","client","create","baseURL","process","env","REACT_APP_API","interceptors","request","use","token","localStorage","getItem","refresh","headers","Authorization","get","post","delete","update","put","extractErrorMessage","axiosCall"],"mappings":"AAAA;AACA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,gBAAtB;;AAGA,SAASC,qBAAT,CAA+BC,GAA/B,EAAoC;AAChC,MAAIA,GAAG,CAACC,QAAJ,IAAgBD,GAAG,CAACC,QAAJ,CAAaC,MAAb,IAAuB,GAAvC,IAA8CF,GAAG,CAACC,QAAJ,CAAaC,MAAb,IAAuB,GAAzE,EAA8E;AAC3E,QAAI;AACH,UAAOF,GAAG,CAACC,QAAX,EAAoB;AAEhB,YAAID,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAAxB,IAEM,CAACF,GAAG,CAACG,MAAJ,CAAWC,GAAX,CAAeC,QAAf,CAAwB,QAAxB,CAAD,IACA,CAACL,GAAG,CAACG,MAAJ,CAAWC,GAAX,CAAeC,QAAf,CAAwB,QAAxB,CAHX,EAIO,CAEL;;AAEF,cAAM;AAAEC,UAAAA;AAAF,YAAWN,GAAG,CAACC,QAArB;AACA,cAAMM,KAAK,GAAGD,IAAI,CAACE,MAAL,GAAe,GAAEF,IAAI,CAACE,MAAL,CAAY,CAAZ,EAAeC,OAAQ,IAAGH,IAAI,CAACE,MAAL,CAAY,CAAZ,EAAeE,KAAf,GAAuBJ,IAAI,CAACE,MAAL,CAAY,CAAZ,EAAeE,KAAtC,GAA8C,EAAG,EAA5F,GAAgGJ,IAAI,CAACK,OAAL,CAAaF,OAA3H;AACAG,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBN,KAAzB;AACAT,QAAAA,KAAK,CAACS,KAAD,CAAL;AACA,eAAOO,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUT,KAAV,CAAf,CAAP;AAIH;AACJ,KApBE,CAoBD,OAAOA,KAAP,EAAc;AACZK,MAAAA,OAAO,CAACC,GAAR,CAAYN,KAAZ;AACH,KAvB6E,CAwB1E;;AACD,GAzBH,MAyBS,IAAIP,GAAG,CAACiB,IAAJ,KAAa,cAAjB,EAAiC;AACtC;AACA;AACA,WAAO,WAAP;AACH,GAJQ,MAIF;AACH;AACA,WAAOH,OAAO,CAACC,MAAR,CAAef,GAAf,CAAP;AACH;AACJ;;AAED,SAASkB,cAAT,CAAwBjB,QAAxB,EAAkC;AAC9BW,EAAAA,OAAO,CAACC,GAAR,CAAa,mBAAkBZ,QAAS,EAAxC;AACH;;AAED,SAASkB,WAAT,CAAqBZ,KAArB,EAA4B;AACxBK,EAAAA,OAAO,CAACC,GAAR,CAAa,gBAAeN,KAAM,EAAlC;AACH;;AAED,MAAMa,UAAN,CAAiB;AACbC,EAAAA,WAAW,GAAG;AACV,SAAKC,MAAL,GAAczB,KAAK,CAAC0B,MAAN,CAAa;AACvBC,MAAAA,OAAO,EAAG,GAAEC,OAAO,CAACC,GAAR,CAAYC,aAAc;AADf,KAAb,CAAd,CADU,CAOV;;AACA,SAAKL,MAAL,CAAYM,YAAZ,CAAyBC,OAAzB,CAAiCC,GAAjC,CAAqC,UAAU3B,MAAV,EAAkB;AACnD;AACA,YAAM4B,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAd;AACA,YAAMC,OAAO,GAAGF,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAhB;AACA9B,MAAAA,MAAM,CAACgC,OAAP,CAAeC,aAAf,GAAgC,UAASL,KAAM,EAA/C;AACA5B,MAAAA,MAAM,CAACgC,OAAP,CAAe,iBAAf,IAAqC,WAAUD,OAAQ,EAAvD;AACA,aAAO/B,MAAP;AACH,KAPD,EAOG,UAAUI,KAAV,EAAiB;AAChB;AACA,aAAOO,OAAO,CAACC,MAAR,CAAeR,KAAf,CAAP;AACH,KAVD,EARU,CAqBV;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEH;AAED;AACJ;AACA;AACA;AACA;;;AACI8B,EAAAA,GAAG,CAACjC,GAAD,EAAM;AACL,WAAO,KAAKkB,MAAL,CAAYe,GAAZ,CAAgBjC,GAAhB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACIkC,EAAAA,IAAI,CAAClC,GAAD,EAAME,IAAN,EAAY;AACZ,WAAO,KAAKgB,MAAL,CAAYgB,IAAZ,CAAiBlC,GAAjB,EAAsBE,IAAtB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACIiC,EAAAA,MAAM,CAACnC,GAAD,EAAM;AACR,WAAO,KAAKkB,MAAL,CAAYiB,MAAZ,CAAmBnC,GAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACIoC,EAAAA,MAAM,CAACpC,GAAD,EAAiB;AAAA,QAAXE,IAAW,uEAAJ,EAAI;AACnB,WAAO,KAAKgB,MAAL,CAAYmB,GAAZ,CAAgBrC,GAAhB,EAAqBE,IAArB,CAAP;AACH;AAGD;AACJ;AACA;AACA;;;AACIoC,EAAAA,mBAAmB,CAACnC,KAAD,EAAQ;AACvBK,IAAAA,OAAO,CAACC,GAAR,CAAY;AAAEN,MAAAA,KAAK,EAAEA;AAAT,KAAZ;AAEA,UAAM;AAAED,MAAAA;AAAF,QAAWC,KAAK,CAACN,QAAvB;AACA,WAAQ,GAAEK,IAAI,CAACE,MAAL,CAAY,CAAZ,EAAeC,OAAQ,IAAGH,IAAI,CAACE,MAAL,CAAY,CAAZ,EAAeE,KAAf,GAAuBJ,IAAI,CAACE,MAAL,CAAY,CAAZ,EAAeE,KAAtC,GAA8C,EAAG,EAArF;AACH;;AA5FY;;AAkGjB,MAAMiC,SAAS,GAAG,IAAIvB,UAAJ,EAAlB;AAGA,eAAeuB,SAAf","sourcesContent":["/**\n * Set of fucntions to handle axios calls\n */\n\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\n\n\nfunction manageErrorConnection(err) {\n    if (err.response && err.response.status >= 400 && err.response.status <= 500) {\n       try {\n        if (   err.response){\n           \n            if (err.response.status === 401 &&\n                  ( \n                      !err.config.url.includes('signin') &&\n                      !err.config.url.includes('signup') ) \n                )  {\n\n             }\n    \n            const { data } = err.response;\n            const error = data.errors ? `${data.errors[0].message} ${data.errors[0].cause ? data.errors[0].cause : ''}` : data.payload.message\n            console.log('::::::::::',error)\n            toast(error)\n            return Promise.reject(new Error(error))\n    \n       \n         \n        }\n    } catch (error) {\n        console.log(error)\n    }\n        // this will trigger the `handleError` function in the promise chain\n      } else if (err.code === 'ECONNREFUSED') {\n        // this will trigger the `handlerResponse` function in the promise chain\n        // bacause we are not returning a rejection! Just an example\n        return 'nevermind'\n    } else {\n        // this will trigger the `handleError` function in the promise chain\n        return Promise.reject(err)\n    }\n}\n\nfunction handleResponse(response) {\n    console.log(`handleResponse: ${response}`);\n}\n\nfunction handleError(error) {\n    console.log(`handleError: ${error}`);\n}\n\nclass AxiosCalls {\n    constructor() {\n        this.client = axios.create({\n            baseURL: `${process.env.REACT_APP_API}`\n        });\n\n\n\n        // Add a request interceptor\n        this.client.interceptors.request.use(function (config) {\n            // Do something before request is sent\n            const token = localStorage.getItem('accessToken')\n            const refresh = localStorage.getItem('refreshToken')\n            config.headers.Authorization = `Bearer ${token}`;\n            config.headers[\"X-Refresh-Token\"] = `refresh ${refresh}`;\n            return config;\n        }, function (error) {\n            // Do something with request error\n            return Promise.reject(error);\n        });\n\n\n        // this.client.interceptors.response.use(function (config) {\n        //     try {\n        //         console.log({ status: config.status })\n        //         const refreshToken = config.headers['x-refresh-token'];\n        //         const accessToken = config.headers['x-access-token'];\n        //         if (refreshToken && refreshToken) {\n\n        //             AuthUtil.registerUser({ accessToken, refreshToken })\n        //         }\n\n        //         return config;\n        //     } catch (error) {\n        //         console.log({ mmm: error })\n        //         return config;\n        //     }\n\n        // }\n        // , manageErrorConnection\n        // )\n\n    }\n\n    /**\n     * @description Axios get request\n     * @param {*} url url for request\n     * @returns  axios promisr\n     */\n    get(url) {\n        return this.client.get(url)\n    }\n\n    /**\n     * @description axios post request\n     * @param {*} url  for requst\n     * @param {*} data to post\n     * @returns \n     */\n    post(url, data) {\n        return this.client.post(url, data)\n    }\n\n    /**\n     * @description deltet axios requestt\n     * @param {*} url url for request\n     * @returns \n     */\n    delete(url) {\n        return this.client.delete(url)\n    }\n\n    /**\n     * \n     * @param {*} url url for request\n     * @param {*} data data to pass\n     * @returns \n     */\n    update(url, data = {}) {\n        return this.client.put(url, data)\n    }\n\n\n    /**\n     * @description this function extract the error response message from the data\n     * @param {ErrorObject} error \n     */\n    extractErrorMessage(error) {\n        console.log({ error: error })\n\n        const { data } = error.response;\n        return `${data.errors[0].message} ${data.errors[0].cause ? data.errors[0].cause : ''}`\n    }\n\n\n}\n\n\nconst axiosCall = new AxiosCalls()\n\n\nexport default axiosCall"]},"metadata":{},"sourceType":"module"}