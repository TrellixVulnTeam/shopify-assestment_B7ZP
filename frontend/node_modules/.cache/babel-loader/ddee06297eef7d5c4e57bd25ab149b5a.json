{"ast":null,"code":"/**\n * Set of fucntions to handle axios calls\n */\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\n\nfunction manageErrorConnection(err) {\n  if (err.response && err.response.status >= 400 && err.response.status <= 500) {\n    try {\n      if (err.response) {\n        if (err.response.status === 401 && !err.config.url.includes('signin') && !err.config.url.includes('signup')) {}\n\n        const {\n          data\n        } = err.response;\n        const error = data.errors ? `${data.errors[0].message} ${data.errors[0].cause ? data.errors[0].cause : ''}` : data.payload.message;\n        console.log('::::::::::', error);\n        toast(error);\n        return Promise.reject(new Error(error));\n      }\n    } catch (error) {\n      console.log(error);\n    } // this will trigger the `handleError` function in the promise chain\n\n  } else if (err.code === 'ECONNREFUSED') {\n    // this will trigger the `handlerResponse` function in the promise chain\n    // bacause we are not returning a rejection! Just an example\n    return 'nevermind';\n  } else {\n    // this will trigger the `handleError` function in the promise chain\n    return Promise.reject(err);\n  }\n}\n\nfunction handleResponse(response) {\n  console.log(`handleResponse: ${response}`);\n}\n\nfunction handleError(error) {\n  console.log(`handleError: ${error}`);\n}\n\nclass AxiosCalls {\n  constructor() {\n    this.client = axios.create({\n      baseURL: `${process.env.REACT_APP_API}`\n    }); // Add a request interceptor\n\n    this.client.interceptors.request.use(function (config) {\n      // Do something before request is sent\n      const token = localStorage.getItem('accessToken'); // const refresh = localStorage.getItem('refreshToken')\n\n      config.headers.Authorization = `Bearer ${token}`; // config.headers[\"X-Refresh-Token\"] = `refresh ${refresh}`;\n\n      return config;\n    }, function (error) {\n      // Do something with request error\n      return Promise.reject(error);\n    });\n  }\n  /**\n   * @description Axios get request\n   * @param {*} url url for request\n   * @returns  axios promisr\n   */\n\n\n  get(url) {\n    return this.client.get(url);\n  }\n  /**\n   * @description axios post request\n   * @param {*} url  for requst\n   * @param {*} data to post\n   * @returns \n   */\n\n\n  post(url, data) {\n    return this.client.post(url, data);\n  }\n  /**\n   * @description deltet axios requestt\n   * @param {*} url url for request\n   * @returns \n   */\n\n\n  delete(url) {\n    return this.client.delete(url);\n  }\n  /**\n   * \n   * @param {*} url url for request\n   * @param {*} data data to pass\n   * @returns \n   */\n\n\n  update(url) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this.client.put(url, data);\n  }\n  /**\n   * @description this function extract the error response message from the data\n   * @param {ErrorObject} error \n   */\n\n\n  extractErrorMessage(error) {\n    console.log({\n      error: error\n    });\n    const {\n      data\n    } = error.response;\n    return `${data.errors[0].message} ${data.errors[0].cause ? data.errors[0].cause : ''}`;\n  }\n\n}\n\nconst axiosCall = new AxiosCalls();\nexport default axiosCall;","map":{"version":3,"names":["axios","toast","manageErrorConnection","err","response","status","config","url","includes","data","error","errors","message","cause","payload","console","log","Promise","reject","Error","code","handleResponse","handleError","AxiosCalls","constructor","client","create","baseURL","process","env","REACT_APP_API","interceptors","request","use","token","localStorage","getItem","headers","Authorization","get","post","delete","update","put","extractErrorMessage","axiosCall"],"sources":["/Users/somto/Desktop/personal/shop/src/utils/axios.js"],"sourcesContent":["/**\n * Set of fucntions to handle axios calls\n */\n\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\n\n\nfunction manageErrorConnection(err) {\n    if (err.response && err.response.status >= 400 && err.response.status <= 500) {\n       try {\n        if (   err.response){\n           \n            if (err.response.status === 401 &&\n                  ( \n                      !err.config.url.includes('signin') &&\n                      !err.config.url.includes('signup') ) \n                )  {\n\n             }\n    \n            const { data } = err.response;\n            const error = data.errors ? `${data.errors[0].message} ${data.errors[0].cause ? data.errors[0].cause : ''}` : data.payload.message\n            console.log('::::::::::',error)\n            toast(error)\n            return Promise.reject(new Error(error))\n    \n       \n         \n        }\n    } catch (error) {\n        console.log(error)\n    }\n        // this will trigger the `handleError` function in the promise chain\n      } else if (err.code === 'ECONNREFUSED') {\n        // this will trigger the `handlerResponse` function in the promise chain\n        // bacause we are not returning a rejection! Just an example\n        return 'nevermind'\n    } else {\n        // this will trigger the `handleError` function in the promise chain\n        return Promise.reject(err)\n    }\n}\n\nfunction handleResponse(response) {\n    console.log(`handleResponse: ${response}`);\n}\n\nfunction handleError(error) {\n    console.log(`handleError: ${error}`);\n}\n\nclass AxiosCalls {\n    constructor() {\n        this.client = axios.create({\n            baseURL: `${process.env.REACT_APP_API}`\n        });\n\n        // Add a request interceptor\n        this.client.interceptors.request.use(function (config) {\n            // Do something before request is sent\n            const token = localStorage.getItem('accessToken')\n            // const refresh = localStorage.getItem('refreshToken')\n            config.headers.Authorization = `Bearer ${token}`;\n            // config.headers[\"X-Refresh-Token\"] = `refresh ${refresh}`;\n            return config;\n        }, function (error) {\n            // Do something with request error\n            return Promise.reject(error);\n        });\n\n    }\n\n    /**\n     * @description Axios get request\n     * @param {*} url url for request\n     * @returns  axios promisr\n     */\n    get(url) {\n        return this.client.get(url)\n    }\n\n    /**\n     * @description axios post request\n     * @param {*} url  for requst\n     * @param {*} data to post\n     * @returns \n     */\n    post(url, data) {\n        return this.client.post(url, data)\n    }\n\n    /**\n     * @description deltet axios requestt\n     * @param {*} url url for request\n     * @returns \n     */\n    delete(url) {\n        return this.client.delete(url)\n    }\n\n    /**\n     * \n     * @param {*} url url for request\n     * @param {*} data data to pass\n     * @returns \n     */\n    update(url, data = {}) {\n        return this.client.put(url, data)\n    }\n\n\n    /**\n     * @description this function extract the error response message from the data\n     * @param {ErrorObject} error \n     */\n    extractErrorMessage(error) {\n        console.log({ error: error })\n\n        const { data } = error.response;\n        return `${data.errors[0].message} ${data.errors[0].cause ? data.errors[0].cause : ''}`\n    }\n\n\n}\n\n\nconst axiosCall = new AxiosCalls()\n\n\nexport default axiosCall"],"mappings":"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"},"metadata":{},"sourceType":"module"}