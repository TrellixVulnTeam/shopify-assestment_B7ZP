{"ast":null,"code":"import axiosCall from \"../utils/axios\";\nimport queryString from 'query-string';\nimport { login } from \"../utils/auth\";\n/**\n * @description tthis function calls the request user auth token\n */\n\nexport const requestAuthToken = async () => {\n  const {\n    data\n  } = await axiosCall.get('auth/provider/request/get');\n  return data;\n};\n/**\n * @description validate the callback\n */\n\nexport const validateUtil = async () => {\n  const {\n    oauth_token,\n    oauth_verifier\n  } = queryString.parse(window.location.search); ///validate tth tokens on the backend\n\n  if (oauth_token && oauth_verifier) {\n    try {\n      //Oauth Step 3\n      const {\n        data\n      } = await axiosCall.post('auth/provider/setupuser', {\n        oauth_token,\n        oauth_verifier\n      });\n\n      if (data.status !== 'success') {\n        throw new Error('Cant log in');\n      }\n\n      console.log(data);\n      login(data.data.tokens);\n    } catch (error) {\n      console.error(error); //////error if i cant login show a toast and go back too login page\n\n      window.location.href = \"/login\";\n    }\n  }\n};\n/**\n * @description Load user details\n */\n\nexport const loadUser = async () => {\n  try {\n    //Oauth Step 3\n    const {\n      data\n    } = await axiosCall.get('auth/provider/loaduser');\n\n    if (data.status !== 'success') {\n      throw new Error('Cant log in');\n    }\n\n    console.log(data);\n    return data.data;\n  } catch (error) {\n    console.error(error); //////error if i cant login show a toast and go back too login page\n  }\n};","map":{"version":3,"names":["axiosCall","queryString","login","requestAuthToken","data","get","validateUtil","oauth_token","oauth_verifier","parse","window","location","search","post","status","Error","console","log","tokens","error","href","loadUser"],"sources":["/Users/somto/Desktop/personal/shop/src/services/auth.js"],"sourcesContent":["import axiosCall from \"../utils/axios\"\nimport queryString from 'query-string';\nimport { login } from \"../utils/auth\";\n\n\n/**\n * @description tthis function calls the request user auth token\n */\nexport const requestAuthToken = async () => {\n    const { data } = await axiosCall.get('auth/provider/request/get')\n    return data\n}\n\n/**\n * @description validate the callback\n */\nexport const validateUtil = async () => {\n    const { oauth_token, oauth_verifier } = queryString.parse(window.location.search);\n\n    ///validate tth tokens on the backend\n    if (oauth_token && oauth_verifier) {\n        try {\n            //Oauth Step 3\n            const { data } = await axiosCall.post('auth/provider/setupuser', { oauth_token, oauth_verifier });\n            if (data.status !== 'success') {\n                throw new Error('Cant log in')\n            }\n            console.log(data)\n            login(data.data.tokens)\n        } catch (error) {\n            console.error(error);\n            //////error if i cant login show a toast and go back too login page\n            window.location.href = \"/login\"\n        }\n    }\n\n}\n\n\n\n/**\n * @description Load user details\n */\nexport const loadUser = async () => {\n\n    try {\n        //Oauth Step 3\n        const { data } = await axiosCall.get('auth/provider/loaduser');\n        if (data.status !== 'success') {\n            throw new Error('Cant log in')\n        }\n        console.log(data)\n        return data.data\n     } catch (error) {\n        console.error(error);\n        //////error if i cant login show a toast and go back too login page\n     }\n\n\n}"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,gBAAtB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,SAASC,KAAT,QAAsB,eAAtB;AAGA;AACA;AACA;;AACA,OAAO,MAAMC,gBAAgB,GAAG,YAAY;EACxC,MAAM;IAAEC;EAAF,IAAW,MAAMJ,SAAS,CAACK,GAAV,CAAc,2BAAd,CAAvB;EACA,OAAOD,IAAP;AACH,CAHM;AAKP;AACA;AACA;;AACA,OAAO,MAAME,YAAY,GAAG,YAAY;EACpC,MAAM;IAAEC,WAAF;IAAeC;EAAf,IAAkCP,WAAW,CAACQ,KAAZ,CAAkBC,MAAM,CAACC,QAAP,CAAgBC,MAAlC,CAAxC,CADoC,CAGpC;;EACA,IAAIL,WAAW,IAAIC,cAAnB,EAAmC;IAC/B,IAAI;MACA;MACA,MAAM;QAAEJ;MAAF,IAAW,MAAMJ,SAAS,CAACa,IAAV,CAAe,yBAAf,EAA0C;QAAEN,WAAF;QAAeC;MAAf,CAA1C,CAAvB;;MACA,IAAIJ,IAAI,CAACU,MAAL,KAAgB,SAApB,EAA+B;QAC3B,MAAM,IAAIC,KAAJ,CAAU,aAAV,CAAN;MACH;;MACDC,OAAO,CAACC,GAAR,CAAYb,IAAZ;MACAF,KAAK,CAACE,IAAI,CAACA,IAAL,CAAUc,MAAX,CAAL;IACH,CARD,CAQE,OAAOC,KAAP,EAAc;MACZH,OAAO,CAACG,KAAR,CAAcA,KAAd,EADY,CAEZ;;MACAT,MAAM,CAACC,QAAP,CAAgBS,IAAhB,GAAuB,QAAvB;IACH;EACJ;AAEJ,CApBM;AAwBP;AACA;AACA;;AACA,OAAO,MAAMC,QAAQ,GAAG,YAAY;EAEhC,IAAI;IACA;IACA,MAAM;MAAEjB;IAAF,IAAW,MAAMJ,SAAS,CAACK,GAAV,CAAc,wBAAd,CAAvB;;IACA,IAAID,IAAI,CAACU,MAAL,KAAgB,SAApB,EAA+B;MAC3B,MAAM,IAAIC,KAAJ,CAAU,aAAV,CAAN;IACH;;IACDC,OAAO,CAACC,GAAR,CAAYb,IAAZ;IACA,OAAOA,IAAI,CAACA,IAAZ;EACF,CARF,CAQG,OAAOe,KAAP,EAAc;IACbH,OAAO,CAACG,KAAR,CAAcA,KAAd,EADa,CAEb;EACF;AAGL,CAhBM"},"metadata":{},"sourceType":"module"}